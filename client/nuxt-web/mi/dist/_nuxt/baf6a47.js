(window.webpackJsonp=window.webpackJsonp||[]).push([[46,47],{572:function(t,e,n){"use strict";n.r(e);var d=n(22),l=n(7),o=(n(49),n(11),n(28),n(31),n(16),n(298),n(199),n(128));e.default={layout:"user",head:function(){return{title:"订单详情-个人中心"}},data:function(){return{loading:!0,buttonLoading:!1,total:0,indent:{}}},mounted:function(){this.getDetail()},methods:{getDetail:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($nuxt.$route.query.id){e.next=4;break}return t.$message({message:"参数有误，请联系管理员",type:"error"}),$nuxt.$router.go(-1),e.abrupt("return",!1);case 4:return e.next=6,Promise.all([Object(o.e)($nuxt.$route.query.id)]).then((function(e){var n=Object(d.a)(e,1)[0];t.indent=n,t.total=0;var l=null;t.indent.goods_list.forEach((function(e){t.total+=e.price*e.number,e.good_sku&&(l=null,e.good_sku.product_sku.forEach((function(t){l?l+=t.value+";":l=t.value+";"})),e.specification=l.substr(0,l.length-1))})),t.total=Number(t.total.toFixed(2)),t.loading=!1})).catch((function(e){t.loading=!1}));case 6:case"end":return e.stop()}}),e)})))()},confirmReceipt:function(){var t=this;this.$confirm("是否确认收货？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.buttonLoading=!0,Object(o.i)(t.indent.id).then((function(e){t.buttonLoading=!1,t.$message({message:"操作成功",type:"success"}),t.getDetail()})).catch((function(){t.buttonLoading=!1}))})).catch((function(){}))},goBack:function(){$nuxt.$router.go(-1)}}}},573:function(t,e,n){var content=n(652);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("ab7c71d8",content,!0,{sourceMap:!1})},651:function(t,e,n){"use strict";n(573)},652:function(t,e,n){var d=n(9)(!1);d.push([t.i,".specification[data-v-5e394244]{color:#999}.top[data-v-5e394244]{margin-top:20px}.right .li[data-v-5e394244],.top[data-v-5e394244]{display:flex;flex-direction:row;justify-content:space-between}.right .li[data-v-5e394244]{font-size:12px;color:#999;line-height:45px}.right .li .name[data-v-5e394244]{text-align:right;flex:1}.right .li .value[data-v-5e394244]{min-width:100px;text-align:right;color:#fa524c}.right .li .total[data-v-5e394244]{position:relative;top:-5px}.right .li .total span[data-v-5e394244]{font-size:30px}.address .min-title[data-v-5e394244]{margin-bottom:20px}.address .li[data-v-5e394244]{display:flex;line-height:25px;font-size:12px}.address .li .name[data-v-5e394244]{width:80px;text-align:right}.address .li .value[data-v-5e394244]{color:#999}.steps-box-time .steps[data-v-5e394244]{display:flex;font-size:12px;line-height:25px;margin-top:5px}.steps-box-time .steps div[data-v-5e394244]{flex:1;text-align:center}.steps-box .title[data-v-5e394244]{color:#fa524c;margin-bottom:10px}.steps-box .steps[data-v-5e394244]{display:flex;border-radius:5px;background-color:#e1e1e1;font-size:12px;line-height:25px}.steps-box .steps .on[data-v-5e394244]{background-color:#fa524c;color:#fff;border-radius:5px}.steps-box .steps div[data-v-5e394244]{flex:1}.steps-box .steps div .chunk[data-v-5e394244]{text-align:center}",""]),t.exports=d},684:function(t,e,n){"use strict";n.r(e);var d=n(572).default,l=(n(651),n(6)),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("el-page-header",{attrs:{content:"订单详情"},on:{back:t.goBack}}),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"top"},[n("div",{staticClass:"order-number"},[t._v("订单号："+t._s(t.indent.identification))]),t._v(" "),n("div",{staticClass:"operation"},[1===t.indent.state?n("div",[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini"}},[t._v("取消订单")])],1):t._e(),t._v(" "),1===t.indent.state?n("NuxtLink",{attrs:{to:{path:"/money/pay",query:{id:t.indent.id}}}},[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini",type:"danger"}},[t._v("立即付款")])],1):t._e(),t._v(" "),3===t.indent.state?n("div",[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini",type:"danger"},on:{click:function(e){return t.confirmReceipt(t.item)}}},[t._v("确认收货")])],1):t._e()],1)]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"steps-box"},[n("div",{staticClass:"title"},[t._v(t._s(t.indent.state_show))]),t._v(" "),n("div",{staticClass:"steps"},[n("div",{class:{on:t.indent.created_at}},[n("div",{staticClass:"chunk"},[t._v("下单")])]),t._v(" "),n("div",{class:{on:t.indent.pay_time}},[n("div",{staticClass:"chunk"},[t._v("付款")]),t._v(" "),n("div",{staticClass:"name"})]),t._v(" "),n("div",{class:{on:t.indent.shipping_time}},[n("div",{staticClass:"chunk"},[t._v("配货")]),t._v(" "),n("div",{staticClass:"name"})]),t._v(" "),n("div",{class:{on:5===t.indent.state}},[n("div",{staticClass:"chunk"},[t._v("交易成功")]),t._v(" "),n("div",{staticClass:"name"})])])]),t._v(" "),n("div",{staticClass:"steps-box-time"},[n("div",{staticClass:"steps"},[n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.created_at))])]),t._v(" "),n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.pay_time))])]),t._v(" "),n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.shipping_time))])]),t._v(" "),n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(5===t.indent.state?t.indent.confirm_time:""))])])])]),t._v(" "),n("el-table",{ref:"table",staticClass:"table",attrs:{data:t.indent.goods_list}},[n("el-table-column",{attrs:{align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("NuxtLink",{attrs:{to:{path:"/product/detail",query:{id:e.row.good_id}}}},[n("el-image",{staticClass:"image",attrs:{src:t._f("smallImage")(e.row.img,80),fit:"cover"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("NuxtLink",{attrs:{to:{path:"/product/detail",query:{id:e.row.good_id}}}},[n("p",[t._v(t._s(e.row.name))]),t._v(" "),n("p",{staticClass:"specification"},[t._v(t._s(e.row.specification))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"单价",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("thousands")(e.row.price))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数量",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.number)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"小计",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("thousands")(e.row.price*e.row.number))+"\n        ")]}}])})],1),t._v(" "),n("el-divider"),t._v(" "),t.indent.good_location?n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("收货信息")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("姓名：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.good_location.name))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("联系电话：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.good_location.cellphone))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("收货地址：")]),t._v(" "),n("div",{staticClass:"value"},[t._v("\n          "+t._s(t.indent.good_location.location)+"\n          "),t.indent.good_location.address?n("span",[t._v("("+t._s(t.indent.good_location.address)+")")]):t._e(),t._v("\n          "+t._s(t.indent.good_location.house)+"\n        ")])])]):t._e(),t._v(" "),n("el-divider"),t._v(" "),t.indent.refund_time?n("div",[n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("退款方式")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款方式：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_way))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款时间：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_time))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款金额：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_money))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款原因：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_reason))])])]),t._v(" "),n("el-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("其它")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("备注：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.remark?t.indent.remark:"无"))])])]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("商品总价：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t._f("thousands")(t.total))+"元")])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("运费：")]),t._v(" "),t.indent.carriage>0?n("div",{staticClass:"value"},[t._v(t._s(t._f("thousands")(t.indent.carriage))+"元")]):n("div",{staticClass:"value"},[t._v("免运费")])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("应付金额：")]),t._v(" "),n("div",{staticClass:"value total"},[n("span",[t._v(t._s(t._f("thousands")(t.indent.total)))]),t._v("元")])])])],1)],1)}),[],!1,null,"5e394244",null);e.default=component.exports}}]);